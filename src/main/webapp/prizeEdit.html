<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>礼物设置</title>
</head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<link type="text/css" rel="stylesheet" href="bootstrap/dist/css/bootstrap.css" />
<link type="text/css" rel="stylesheet" href="bootstrap/dist/css/bootstrap-theme.css" />
<!-- jQuery文件。务必在bootstrap.min.js 之前引入 -->
<script src="http://cdn.bootcss.com/jquery/1.11.1/jquery.min.js"></script>
<script src="bootstrap/dist/js/bootstrap.js" ></script>
<script src="js/angular.min.js" ></script>
<script src="js/zoke.js"> </script>
<body  ng-app="app" ng-controller="ctrl">
<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container">
        <div id="navbar" class="collapse navbar-collapse">
            <ul class="nav navbar-nav">
                <li class="active"><a href="#">中奖列表</a></li>
                <li><a href="prize.html">奖品管理</a></li>
                <li><a href="contact.html">抽奖配置</a></li>
            </ul>
        </div><!--/.nav-collapse -->
    </div>
</nav>
<form role="form" style="padding-top: 60px">

  <div class="form-group">
  <label >奖品名称</label>
    <input type="text" class="form-control" id="prizeName"
    value="{{prize.prizeName}}" placeholder="请输入奖品名称">
  </div>

  <div class="form-group">
        <label>奖品等级</label>
        <select class="form-control" >
        <option ng-repeat="l in levels" value="{{prize.prizeLevelId}}">{{l.prizeLevelName}} </option>
        </select>
  </div>
  
  <div class="form-group">
        <label>抽奖类型</label>
        <select class="form-control" >
      <option ng-repeat="calNum in calNumSets" value="prize.numSetId">一次抽{{calNum.time}}
      最大值{{calNum.maxNum}}  最小值{{calNum.minNum}}</option>
      </select>
  </div>
  
  
  <div class="form-group">
        <label>奖品数量</label>
        <input type="text" value = "{{prize.remainTime}}"id="remainTime">
  </div>

    <div class="form-group">
        <label>奖品数量</label>
        <input type="file" id="prizeImg" value = "{{prize.prizeImg}}">
    </div>

    <button type="submit" class="btn btn-default">Submit</button>
</form>
<script>
    var app = angular.module('app', []);
    prizeId = zoke.getUrlElement("prizeId");
    app.controller('ctrl', function($scope, $http){

        $http({
            method:'GET',
            url:'app/getPrizeById?prizeId=' + prizeId
        }).then(function successCallback(response) {
             console.log(JSON.stringify(response.data));
             $scope.prize = response.data.data;
        }, function errorCallback(response) {
             alert("网络连接异常");
        })

        $http({
            method:'GET',
            url:'app/getPrizeLevel'
        }).then(function successCallback(response) {
             console.log(JSON.stringify(response.data));
             $scope.levels= response.data.data;
        }, function errorCallback(response) {
             alert("网络连接异常");
        })

        $http({
            method:'GET',
            url:'app/getCalNumSet'
        }).then(function successCallback(response) {
             console.log(JSON.stringify(response.data));
             $scope.calNumSets = response.data.data;
        }, function errorCallback(response) {
             alert("网络连接异常");
        })

    })
</script>

</body>
</html>
